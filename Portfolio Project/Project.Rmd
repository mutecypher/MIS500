---
title: "Practice Porfolio"
author: "Michael Pearson"
date: "1/13/2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

## Connect to the page and download the zipped files

temp <- tempfile()

download.file("https://archive.ics.uci.edu/ml/machine-learning-databases/00296/dataset_diabetes.zip", temp)

post_zipped <- unzip(temp)

post_zipped



diabetes_data <- read.csv("./dataset_diabetes/diabetic_data.csv", header = TRUE)

head(diabetes_data)

## Convert to a data table for easier subsetting

## Now convert to a data table so that the genders can be broken out into separate tables for analysis

library(data.table)
diabetes_data <- data.table(diabetes_data)
setkey(diabetes_data, gender)
males <- diabetes_data["Male"]
females <- diabetes_data["Female"]
setkey(diabetes_data, readmitted)
nope <- diabetes_data["NO"]
more_than_30 <- diabetes_data[">30"]
less_than_30 <- diabetes_data["<30"]

setkey(nope, gender)
male_nope <- nope["Male"]
female_nope <- nope["Female"]
setkey(more_than_30, gender)
male_more_than_30 <- more_than_30["Male"]
female_more_than_30 <- more_than_30["Female"]
setkey(less_than_30, gender)
male_less_than_30 <- less_than_30["Male"]
female_less_than_30 <- less_than_30["Female"]


## Or another way

gender_test <- table(diabetes_data$gender, diabetes_data$readmitted)

race_test <- table(diabetes_data$race, )


## Removing patients with multiple admissions

diabetes_data$duplicates <- duplicated(diabetes_data$patient_nbr)


## Patients numbers only once (may have been readmitted)



No_duplicated_data <- diabetes_data[diabetes_data$duplicates =="FALSE"]


## Patient numbers used more than once


Back_again <- diabetes_data[diabetes_data$duplicates =="TRUE"]





```

